\subsection{Изграждане на работната среда}

За изграждането на работната среда бяха положени много усилия, вследствие на избора да не се използват готови решения,
както и поради нуждата от работа под Linux, тъй като множеството от решения имат целева система Windows.

\subsubsection{Система за изграждане (Make)}

Работната среда е базирана на \textit{Make}, което ни позволява да изградим собствен инструментариум за целите на проекта.
\textit{Make} използва \enquote{цели} (targets) и взаимовръзките \enquote{зависимости} (Dependencies), които изграждат \enquote{целите}. 
За всяка цел се съставя дърво
на зависимостите, като се проверява
кои зависимости имат нужда от преправяне (rebuild). \textit{Make} е платформно независима и може лесно да бъде пренесена на почти всяка система.
\textit{Make} се нуждае единствено от статично или динамично строго описание на взаимовръзките и начините да се
премине от зависимостите към целите. Това става чрез дефиниране на командни скриптове \enquote{рецепти} (recipies), 
което налага ограничението използваният инструментариум да бъде достъпен чрез команден интерфейс.

\subsubsection{Компилатор}

Подбраният комилатор е \textit{GCC ARM NON-EABI}, който е платформно независим, с целева крайна система ARM.
Компилаторът е конфигуриран през командния интерфейс при извикването си от \textit{Make},
като конфигурацията е публикувана \autoref{lst:make_config}.
Конфигурацията включва използването на хардуерния модул за обработка на числа с плаваща запетая,
изключването на всички оптимизации, които компилаторът прави за подобряване на скоростта и използване на паметта с цел гаранция на правилното изпълнение.

\subsubsection{Програматор}

Подбран е командният пакет за \textit{ST-LINK}, тъй като е платформно независим и позволява командно управление на \textit{ST-LINK V2} устройството,
което е част от комплекта \textit{32F429IDISCOVERY}. Този пакет позволява презаписване на вътрешната флаш памент на конторлера,
както и стартиране и управление на порт за дебъг, който да бъде използван за дебъгера.


\subsubsection{Дебъгер}

Подбран е дебъгер GDB, тъй като е платформно независим и позволява командно базирано дебъгване през дебъг порта, отворен с помощта на \textit{ST-LINK}.
Дебъгерът позволява условно и безусловно поставяне на точки за прекъсване (breakpoints) на отделни моменти от изпълнението, 
като се използва генерираният \textit{*.elf} обект,
който е записан във флаш паметта на процесора.

\subsubsection{Получаване и обработка на данни}

Данните се изпращат от микроконтролера, през USART порта и се получават на локалната машина (Linux) чрез TTL четец, \textit{picocom}.
Данните се записват в \textit{*.log} файл, който се обработва автоматично през дефинираната поточна линия от процеси, като създава \textit{*.csv} файл,
който ще бъде използван от \textit{MATLAB (for Linux)} за обработка на данните и генериране на графики.


\subsubsection{Линкерен скрипт}

Написан е линкерен скрипт, който дефинира правилното разположение на паметта на
контролера и управялва разположението и подравняването на символите и секциите в паметта на микроконтролера.
Линкерният скрипт поставя всички константни символи във флаш паметта на контролера, което гарантира, че те няма да бъдат променяни.
Линкерният скрипт също гарантира правилното разположение на вектора на прекъсванията в паметта и отстранява всички символи, свързани със стандартните библиотеки, 
тъй като стандартните библиотеки предполагат наличието на операционна система, 
която да имплементира подфункциите.
По този начин софтуерът, който пишем, е зависим единствено и само от източниците, които ние сме написали или добавили.
Крайният резултат е независим статично свързан обект, който ще бъде поставен в микроконтролера.
